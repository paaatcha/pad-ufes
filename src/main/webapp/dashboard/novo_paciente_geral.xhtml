<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      template="decoratorDashboard/decorator_dashboard.xhtml">
      
      
      
      <ui:define name="conteudoInferiorPagina">   			 
				
				
				
				
				<h:form>	
						
						<p:growl id="growlCheck" showDetail="true" closable="true" />
				
	    				<p:fieldset legend="ADICIONAR NOVO PACIENTE" style="margin-bottom:20px">    									
						
						        
				            <h:panelGrid columns="3" cellspacing="10">
				            
				            	<h:outputText value="Cartão do SUS do paciente:" style="font-weight: bold"/>	
            						<p:inputMask size="30" id="cartao_sus" value="#{pacienteGeralController.pac.cartao_sus}"
									mask="999-9999-9999-9999" >							
									<p:ajax event="blur" />
								</p:inputMask>	
								
								<p:commandButton action="#{pacienteGeralController.instanciaNovaLesao}" icon="ui-icon-check"
							        	 value="Inserir nova lesão" update="@form"
							        	 style="
							        	 	background: #ccffcc -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.4)),to(rgba(255,255,255,0)));							        	 
										 	color: #333;										 	
							        	 "							        	 
							 	/>	
           												                
				            </h:panelGrid>
				            
			          	<p:tabView value="#{pacienteGeralController.pac.lesoes}" var="les" rendered="#{pacienteGeralController.instanciado}" style="margin-bottom: 25px; margin-top: 15px;">
						        
						        <p:tab title="Regiao: #{les.regiao}" id="teste">
						        
						        	<p:commandButton action="#{pacienteGeralController.excluirLesao}" icon="ui-icon-trash"
							        	 value="Excluir lesão" update="@form" process="@this"
							        	 style="
							        	 background: #ffb3b3 -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.4)),to(rgba(255,255,255,0)));
							        	 float: right;
							        	 color: #333;
							        	 padding: 5px;
							        	 "							        	 
							        	 >
							      			<f:setPropertyActionListener value="#{les}" target="#{pacienteGeralController.lesaoSelecionada}" />
							      			
							      			<p:confirm header="ATENÇÃO" message="Você tem certeza que deseja excluir esta lesão?"
					 						icon="ui-icon-alert" />
							      			          						
									</p:commandButton>	
									
									<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
      									<p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
      									<p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
									</p:confirmDialog>	
						        
						        
						            <h:panelGrid columns="2" cellspacing="10">
						            					            						                						                
						                <h:outputText value="Região:" style="font-weight: bold; font-size: 16px;"/>
										<p:autoComplete size="30" id="regiao_edit" value="#{les.regiao}"
											completeMethod="#{pacienteController.completarRegiaoLesao}">								
												<p:ajax event="blur"/>									
										</p:autoComplete>					                
						                                
						                <h:outputText value="Diagnóstico:" style="font-weight: bold; font-size: 16px;"/>
										<p:autoComplete size="30" id="diag_clinEdit" value="#{les.diagnostico}"
											completeMethod="#{pacienteController.completarDiagnosticoLesao}">								
												<p:ajax event="blur" />									
										</p:autoComplete>
										
										<h:outputText value="Idade:" style="font-weight: bold; font-size: 16px;"/>						                
						                <p:spinner size="15" value="#{les.idade}" min="0" stepFactor="1">								
											<p:ajax event="blur" />									
										</p:spinner>        
						                
						                <h:outputText value="Coçou?" style="font-weight: bold; font-size: 16px;"/>
						                <p:selectOneRadio value="#{les.cocou}">
						                	<f:selectItem itemLabel="Sim" itemValue="S"/>
		      								<f:selectItem itemLabel="Não" itemValue="N"/>
						                </p:selectOneRadio>
						                
						                <h:outputText value="Creçeu?" style="font-weight: bold; font-size: 16px;"/>
						                <p:selectOneRadio value="#{les.cresceu}">
						                	<f:selectItem itemLabel="Sim" itemValue="S"/>
		      								<f:selectItem itemLabel="Não" itemValue="N"/>
						                </p:selectOneRadio>						                				                
						                						                
						                <h:outputText value="Doeu?" style="font-weight: bold; font-size: 16px;"/>
						                <p:selectOneRadio value="#{les.doeu}">
						                	<f:selectItem itemLabel="Sim" itemValue="S"/>
		      								<f:selectItem itemLabel="Não" itemValue="N"/>
						                </p:selectOneRadio>
						                						                					                
						                <h:outputText value="Mudou?" style="font-weight: bold; font-size: 16px;"/>
						                <p:selectOneRadio value="#{les.mudou}">
						                	<f:selectItem itemLabel="Sim" itemValue="S"/>
		      								<f:selectItem itemLabel="Não" itemValue="N"/>
						                </p:selectOneRadio>
						                					                
						                <h:outputText value="Sangrou?" style="font-weight: bold; font-size: 16px;"/>
						                <p:selectOneRadio value="#{les.sangrou}">
						                	<f:selectItem itemLabel="Sim" itemValue="S"/>
		      								<f:selectItem itemLabel="Não" itemValue="N"/>
						                </p:selectOneRadio>
						                					                
						                <h:outputText value="Revelo?" style="font-weight: bold; font-size: 16px;"/>
						                <p:selectOneRadio value="#{les.relevo}">
						                	<f:selectItem itemLabel="Sim" itemValue="S"/>
		      								<f:selectItem itemLabel="Não" itemValue="N"/>
						                </p:selectOneRadio>
						                
						                					                					 
						            </h:panelGrid>
								            
						            
						            <br/>
									    
							          <p:dataGrid value="#{les.imagens}" var="img" layout="grid" 
							            style="width:auto" id="dataGridImagens">		
							            
						            		<f:facet name="header">
						            			Imagens da lesão
						            		</f:facet>
						            							
						            				            								            						            	
					            			<p:panelGrid columns="1" >	
					            			
					            				
									     			<p:graphicImage url="imgLesoesGeral/#{img.path}" id="imageEdit" 
										        		style= "
									        			height: 500px;
									        			width: 500px;
									        			margin-right: 10px;
									        		 "/>									        		 
									        		 											        
									        		
										        	<h:panelGroup>						        		
														<p:commandButton action="#{pacienteGeralController.excluirImg(les)}" icon="ui-icon-trash" 
														value="Excluir Imagem" update="@form @form:growlCheck" process="@this"
														style="
															background: #ffb3b3 -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.5)),to(rgba(255,255,255,0)));
															margin-left: 170px;
														"
														>
							      							<f:setPropertyActionListener value="#{img}" target="#{pacienteGeralController.imgSelecionada}" />          						
														</p:commandButton>
														
													</h:panelGroup>
										    	
									    	</p:panelGrid>
									    				    	
									    	
								    	</p:dataGrid>	
								    	
								    	
										<br/><br/>	
										<h:outputText value="Adicionar uma nova imagem para esta lesão:" style="font-weight: bold; font-size: 22px; color: #006600;"/>											
										
										<p:fileUpload label="Procurar Imagem" uploadLabel="Enviar" 
											cancelLabel="Cancelar" id="imgLesaoEdit" 
								 			fileUploadListener="#{pacienteGeralController.inserirNovaImagem}"								 			 
				        					multiple="true"	        					
				        					sizeLimit="10000000"
				        					update="@form:growlCheck dataGridImagens"
				        					style="width:750px"
				        					 
				        				>
				        				
				        					<f:attribute name="lesaoParaNovaImg" value="#{les}" />
				        				
				        				</p:fileUpload>

								</p:tab>
							</p:tabView>
	
							<p:commandButton action="#{pacienteGeralController.salvar}" icon="ui-icon-check"
							        	 value="Salvar paciente" update="@form @form:growlCheck" rendered="#{pacienteGeralController.instanciado}"
							        	 style="
							        	 	background: #ccffcc -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.4)),to(rgba(255,255,255,0)));							        	 
										 	color: #333;
										 	padding: 15px;										 	
							        	 "							        	 
							 />	
	
	     		   		
	     		   		</p:fieldset>	    			
    			
    		</h:form>
				  
	</ui:define>
	
</ui:composition>
