<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      template="decoratorDashboard/decorator_dashboard.xhtml">
      
      <ui:define name="titulo"> Cadastrar paciente </ui:define>
      
      <ui:define name="conteudoInferiorPagina">
      
	
      
      
			<h:form class="formLogin" id="cadastroPaciente">
			
			
					<p:dialog visible="#{edicaoController.pacRecadastro}" header="Paciente já cadastrado" modal="true" width="400px">
						<h:outputText class="valorPac" value="Este paciente já foi cadastrado no banco em alguma das viagens passadas do PAD." />
						<h:outputText class="valorPac" value="Portanto, não existe necessidade de realizar todo o cadastro novamente." />
						
						<br/> <br/>
						
						<h:outputText class="campoPac" value="Atualize apenas o necessário." /> 
						<h:outputText class="valorPac" value="A data deste atendimento e a quantidade de vezes que ele foi atendido pelo PAD serão atualizados automaticamente." />
						
						<br/> <br/>
						
						<h:outputText class="campoPac" value="Ações que você deve tomar:" />
						
						<br/>
						<h:outputText class="valorPac" value="- Verificar a cidade de atendimento: pode ser que o paciente está sendo atendido em uma cidade diferente do antendimento anterior, por favor coloque a cidade atual." />
						
						<br/>
						<h:outputText class="valorPac" value="- Verificar se o endereço do paciente é o mesmo" />
						
						<br/>
						<h:outputText class="valorPac" value="- Atualize TODOS os dados técnicos, como pressão, alergia a medicamento etc." />
						
						<br/>
						<h:outputText class="valorPac" value="- Em hipótese alguma mexa nos dados das lesões já cadastradas." />
						
						<br/> <br/>
						<h:outputText class="valorPac" value="Qualquer dúvida procure ajuda com o TI." />
						
						
					</p:dialog>
	      				      		
		      		
		      		<p:fieldset legend="Dados protocolares" toggleable="true" style="margin-bottom:20px">
        				<h:panelGrid columns="1" cellpadding="5">
            				<p> Local de atendimento: </p>		      		 
							<p:inputText size="30" id="local_atendimento" value="#{edicaoController.pacBuscado.local_atendimento}"
							required="true" 
							requiredMessage="O local de atendimento não foi informado"				
							/>										
							<p:message for="local_atendimento" />
				      		
				    		<p> Data do atendimento: </p>		      		
		        			<p:inputMask id="data_atendimento" value="#{edicaoController.pacBuscado.data_atendimento}" mask="99/99/9999" 
		        			required="true"	requiredMessage="A data de atendimento não foi informada.">
		        				<f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-3"/>
		        			</p:inputMask>
							<p:message for="data_atendimento" />					 
					
							<p> Número do prontuário: </p>		      		 
							<p:inputText size="15" id="prontuario" value="#{edicaoController.pacBuscado.prontuario}"
							required="true" 
							requiredMessage="O prontuario não foi informado"				
							/>										
							<p:message for="prontuario" />	
            				
            				
        					</h:panelGrid>
    					</p:fieldset>
		      		
		      		
		      		<!-- 
		      		<p:fieldset legend="Dados protocolares" toggleable="true" style="margin-bottom:20px">
        				<h:panelGrid columns="1" cellpadding="5">
	
            				
            				
        					</h:panelGrid>
    				</p:fieldset>
		      		 -->
		      		
		      		
					<p:fieldset legend="Informações pessoais" toggleable="true" style="margin-bottom:20px">
        				<h:panelGrid columns="1" cellpadding="5">		      		  		    			
		      		      		
				      		<p> Nome completo do paciente: </p>
							<p:inputText size="50" id="nome_paciente" value="#{edicaoController.pacBuscado.nome_completo}" 
							required="true"
							requiredMessage="O nome completo do paciente não foi informado">				
							</p:inputText>
							<p:message for="nome_paciente" />
							
							<br/>
							
							<p> Número do cartão do SUS: </p>
							<p:inputMask size="30" id="cartao_sus" value="#{edicaoController.pacBuscado.cartao_sus}"
							mask="999-9999-9999-9999" 
							required="true"	requiredMessage="O cartão do sus não foi informado">				
							</p:inputMask>
							<p:message for="cartao_sus" />
							
							<br/>
							
							
				      		<p> Nome completo da mãe: </p>
							<p:inputText size="50" id="nome_mae" value="#{edicaoController.pacBuscado.nome_mae}" 
							required="true"
							requiredMessage="O nome completo da mãe não foi informado">				
							</p:inputText>
							<p:message for="nome_mae" />
							
							<br/>
							
				      		<p> Data de nascimento: </p>		      		
		        			<p:inputMask id="data_nascimento" value="#{edicaoController.pacBuscado.data_nascimento}" mask="99/99/9999" 
		        			required="true"	requiredMessage="A data de nascimento não foi informada.">
		        				<f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-3"/>
		        			</p:inputMask>
							<p:message for="data_nascimento" />					 
							
							<br/>	
							
							<p> Sexo: </p>				
							<p:selectOneRadio id="sexo" value="#{edicaoController.pacBuscado.sexo}" 
							required="true" requiredMessage="O sexo não foi informado.">
		      				<f:selectItem itemLabel="Feminino" itemValue="F"/>
		      				<f:selectItem itemLabel="Masculino" itemValue="M"/>	      		
		      				</p:selectOneRadio>
		      				<p:message for="sexo" />     			
							
				      		<p> Local de nascimento: </p>
							<p:inputText size="30" id="local_nascimento" value="#{edicaoController.pacBuscado.local_nascimento}" 
							required="true"
							requiredMessage="O local de nascimento não foi informado">				
							</p:inputText>
							<p:message for="local_nascimento" />
							
							<br/>
							
							<p> Estado de nascimento: </p>					
							<p:autoComplete id="estado_nascimento" value="#{edicaoController.pacBuscado.estado_nascimento}" completeMethod="#{pacienteController.completarEstados}" />						
							
							<p> Estado civil: </p>				
							<p:selectOneRadio id="estado_civil" value="#{edicaoController.pacBuscado.estado_civil}" 
							required="true" requiredMessage="O estado civil não foi informado.">
		      				<f:selectItem itemLabel="Solteiro" itemValue="S"/>
		      				<f:selectItem itemLabel="Casado" itemValue="C"/>
		      				<f:selectItem itemLabel="Divorciado" itemValue="D"/>
		      				<f:selectItem itemLabel="Viúvo" itemValue="V"/>	      		
		      				</p:selectOneRadio>  
							<p:message for="estado_civil" />					
							
				      		<p> Endereço atual: </p>
							<p:inputText size="50" id="endereco" value="#{edicaoController.pacBuscado.endereco}" 
							required="true"
							requiredMessage="O endereço atual não foi informado">				
							</p:inputText>
							<p:message for="endereco" />					
							
		      				<p> Tempo em que reside no endereço (em anos): </p>
							<p:spinner size="15" id="tempo_endereco" value="#{edicaoController.pacBuscado.tempo_endereco}" min="0"
							required="true" requiredMessage="Tempo em que reside no endereço não informado"/>
							<p:message for="tempo_endereco" />
						</h:panelGrid>
    				</p:fieldset>
					
					
							      		 
		      		<p:fieldset legend="Informações socioeconômicas" toggleable="true" style="margin-bottom:20px">
        				<h:panelGrid columns="1" cellpadding="5">
							<p> Atividade principal: </p>
							<p:inputText size="25" id="atv_principal" value="#{edicaoController.pacBuscado.atv_principal}" 
							required="true"
							requiredMessage="A atividade principal não foi informada">				
							</p:inputText>
							<p:message for="atv_principal" />	
							
							
							<p> Idade em que começou a exercer a atividade: </p>
							<p:spinner size="15" id="idade_inicio_atv" value="#{edicaoController.pacBuscado.idade_inicio_atv}" min="0"
							required="true" requiredMessage="Idade em que começou a exercer a profissão não informado"/>
							<p:message for="idade_inicio_atv" />	
										
							<p> Nível de escolaridade: </p>			
						    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">        
						        <p:selectOneRadio id="escolaridade" value="#{edicaoController.pacBuscado.escolaridade}"  layout="grid" columns="3"
						        required="true" requiredMessage="O nível de escolaridade não foi informado">
						            <f:selectItem itemLabel="Nenhuma" itemValue="NN"/>
									<f:selectItem itemLabel="Fundamental incompleto" itemValue="FI"/>
									<f:selectItem itemLabel="Fundamental completo" itemValue="FC"/>			      				
									<f:selectItem itemLabel="Ensino médio incompleto" itemValue="EI"/>
									<f:selectItem itemLabel="Ensino médio completo" itemValue="EC"/>
									<f:selectItem itemLabel="Superior incompleto" itemValue="SI"/>
									<f:selectItem itemLabel="Superior completo" itemValue="SC"/>
						        </p:selectOneRadio>
   							</h:panelGrid>
							<p:message for="escolaridade" />
							
							<p> Renda familiar (em salários mínimos): </p>			
						    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">        
						        <p:selectOneRadio id="renda" value="#{edicaoController.pacBuscado.renda}"  layout="grid" columns="2"
						        required="true" requiredMessage="Renda familiar não foi informado">
						            <f:selectItem itemLabel="Menor ou igual a 1" itemValue="A1"/>
									<f:selectItem itemLabel="Maior que 1 e menor ou igual a 5" itemValue="1-5"/>
									<f:selectItem itemLabel="Maior que 5 e menor ou igual a 10" itemValue="5-10"/>			      				
									<f:selectItem itemLabel="Maior que 10" itemValue="M10"/>								
						        </p:selectOneRadio>
   							</h:panelGrid>
							<p:message for="renda" />
							
							<p> Número de comodos da residência: </p>			
						    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">        
						        <p:selectOneRadio id="num_comodos" value="#{edicaoController.pacBuscado.num_comodos}"  layout="grid" columns="2"
						        required="true" requiredMessage="Número de comodos não foi informado">
						            <f:selectItem itemLabel="De 1 a 3" itemValue="1-3"/>
									<f:selectItem itemLabel="De 4 a 5" itemValue="4-5"/>
									<f:selectItem itemLabel="Mais de 5" itemValue="M5"/>																	
						        </p:selectOneRadio>
   							</h:panelGrid>
							<p:message for="num_comodos" />										
						    
						    
						    <p> Número de pessoas que vive na residência: </p>			
						    <p:spinner size="15" id="num_pessoas_casa" value="#{edicaoController.pacBuscado.num_pessoas_casa}" min="0"
						    required="true" requiredMessage="Número de pessoas na residência não informado"/>
						    <p:message for="num_pessoas_casa" />	
						    
						    <p> Possui rede de esgoto? </p>				
							<p:selectOneRadio id="rede_esgoto" value="#{edicaoController.pacBuscado.rede_esgoto}" 
							required="true" requiredMessage="Rede de esgoto não informado">
		      				<f:selectItem itemLabel="Sim" itemValue="S"/>
		      				<f:selectItem itemLabel="Não" itemValue="N"/>	      		
		      				</p:selectOneRadio>
		      				<p:message for="rede_esgoto" />
		      				
		      				<p> Possui agua encanada? </p>				
							<p:selectOneRadio id="agua_encanada" value="#{edicaoController.pacBuscado.agua_encanada}" 
							required="true" requiredMessage="Água encanda não informada">
		      				<f:selectItem itemLabel="Sim" itemValue="S"/>
		      				<f:selectItem itemLabel="Não" itemValue="N"/>	      		
		      				</p:selectOneRadio>
		      				<p:message for="agua_encanada" /> 				
            				
        					</h:panelGrid>
    				</p:fieldset>
		      		 
		      		<p:fieldset legend="Mais informações pessoais" toggleable="true" style="margin-bottom:20px">
        				<h:panelGrid columns="1" cellpadding="5">
		
		      				
		      				<p> Faz uso de cigarro? </p>			
						    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">        
						        <p:selectOneRadio id="fumo" value="#{edicaoController.pacBuscado.fumo}"  layout="grid" columns="2"
						        required="true" requiredMessage="Não informou se o paciente é fumante">
						            <f:selectItem itemLabel="Não" itemValue="NAO"/>
									<f:selectItem itemLabel="Menos 5 cigarros por dia" itemValue="ATE5"/>
									<f:selectItem itemLabel="De 5 a 10 cigarros por dia" itemValue="5A10"/>			      				
									<f:selectItem itemLabel="Mais do que 10 cigarros por dia" itemValue="M10"/>
						        </p:selectOneRadio>
   							</h:panelGrid>
							<p:message for="fumo" />
							
							<p> Faz uso de bebida alcólica? </p>			
						    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">        
						        <p:selectOneRadio id="bebida" value="#{edicaoController.pacBuscado.bebida}"  layout="grid" columns="3"
						        required="true" requiredMessage="Não informou se o paciente faz uso de bebida alcólica">
						            <f:selectItem itemLabel="Não" itemValue="NAO"/>
									<f:selectItem itemLabel="Diariamente" itemValue="DIA"/>
									<f:selectItem itemLabel="Finais de semana" itemValue="FDS"/>									
						        </p:selectOneRadio>
   							</h:panelGrid>
							<p:message for="bebida" />	
							
							<p> Faz uso ou mantém contato com agrotóxico? Se sim, qual?</p>		      				
		      				<p:inputText size="20" id="agrotoxico" value="#{edicaoController.pacBuscado.agrotoxico}" />
		      				
							<p> Tipo de pele: </p>						            
					        <p:selectOneRadio id="tipo_pele" value="#{edicaoController.pacBuscado.tipo_pele}"  layout="grid" columns="3"
					        required="true" requiredMessage="Tipo de pele não informado.">
					            <f:selectItem itemLabel="1" itemValue="1"/>
								<f:selectItem itemLabel="2" itemValue="2"/>
								<f:selectItem itemLabel="3" itemValue="3"/>			      				
								<f:selectItem itemLabel="4" itemValue="4"/>
								<f:selectItem itemLabel="5" itemValue="5"/>
					        </p:selectOneRadio>   							
							<p:message for="tipo_pele" />		      				
		      				
		      				<p> Grau de destrofia solar: </p>			
						    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">        
						        <p:selectOneRadio id="destrofia_solar" value="#{edicaoController.pacBuscado.destrofia_solar}"  layout="grid" columns="3"
						        required="true" requiredMessage="Grau de destrofia solar não informado.">
						            <f:selectItem itemLabel="Leve" itemValue="L"/>
									<f:selectItem itemLabel="Moderada" itemValue="M"/>
									<f:selectItem itemLabel="Forte" itemValue="F"/>			      				
									<f:selectItem itemLabel="Ausente" itemValue="A"/>
									<f:selectItem itemLabel="Pré-distrofica" itemValue="P"/>
						        </p:selectOneRadio>
   							</h:panelGrid>
							<p:message for="destrofia_solar" />		 
							
							<p> Quantas horas fica exposto ao sol por dia? </p>			
						    <p:spinner size="15" id="exp_sol" value="#{edicaoController.pacBuscado.exp_sol}" min="0"
						    required="true" requiredMessage="Horas de exposição no sol não informado"
						    />
						    <p:message for="exp_sol" />     
						    
		      				<p> Horário de maior exposição ao sol: </p>			
						    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">        
						        <p:selectOneRadio id="hora_exp_sol" value="#{edicaoController.pacBuscado.hora_exp_sol}"  layout="grid" columns="3"
						        required="true" requiredMessage="Horario de exposição ao sol não informado.">
						            <f:selectItem itemLabel="09h > 16h" itemValue="M"/>
									<f:selectItem itemLabel="Entre 9h e 16h" itemValue="T"/>
									<f:selectItem itemLabel="Ambas" itemValue="A"/>									
						        </p:selectOneRadio>
   							</h:panelGrid>
							<p:message for="hora_exp_sol" />		
							
						    <p> Faz uso de chapéu? </p>				
							<p:selectOneRadio id="chapeu" value="#{edicaoController.pacBuscado.chapeu}" 
							required="true" requiredMessage="Uso de chapéu não informado">
		      				<f:selectItem itemLabel="Sim" itemValue="S"/>
		      				<f:selectItem itemLabel="Não" itemValue="N"/>	      		
		      				</p:selectOneRadio>
		      				<p:message for="chapeu" />				    				
		      				
		      				<p> Faz uso de camisa de mangas compridas? </p>				
							<p:selectOneRadio id="manga_cumprida" value="#{edicaoController.pacBuscado.manga_cumprida}" 
							required="true" requiredMessage="Uso de mangas compridas não informado">
		      				<f:selectItem itemLabel="Sim" itemValue="S"/>
		      				<f:selectItem itemLabel="Não" itemValue="N"/>	      		
		      				</p:selectOneRadio>
		      				<p:message for="manga_cumprida" />	      				
		      				
		      				<p> Faz uso de calças compridas? </p>				
							<p:selectOneRadio id="calca_cumprida" value="#{edicaoController.pacBuscado.calca_cumprida}" 
							required="true" requiredMessage="Uso de calças compridas não informado">
		      				<f:selectItem itemLabel="Sim" itemValue="S"/>
		      				<f:selectItem itemLabel="Não" itemValue="N"/>	      		
		      				</p:selectOneRadio>
		      				<p:message for="calca_cumprida" />
		      				
							<p> Faz uso de filtro solar? </p>				
							<p:selectOneRadio id="filtro_solar" value="#{edicaoController.pacBuscado.filtro_solar}" 
							required="true" requiredMessage="Uso de filtro solar não informado">
		      				<f:selectItem itemLabel="Sim" itemValue="S"/>
		      				<f:selectItem itemLabel="Não" itemValue="N"/>	      		
		      				</p:selectOneRadio>
		      				<p:message for="filtro_solar" />		      				
							
							<p> Origem familiar materna:</p>												
							<p:autoComplete id="origem_familiar_mae" value="#{edicaoController.pacBuscado.origem_familiar_mae}" completeMethod="#{pacienteController.completarOrigemFamiliar}" 
							required="true" requiredMessage="Origem familiar materna não informada"/>
							<p:message for="origem_familiar_mae" />		      				
							
							<p> Origem familiar paterna:</p>												
							<p:autoComplete id="origem_familiar_pai" value="#{edicaoController.pacBuscado.origem_familiar_pai}" completeMethod="#{pacienteController.completarOrigemFamiliar}" 
							required="true" requiredMessage="Origem familiar paterna não informada"/>					
							<p:message for="origem_familiar_pai" />
							
							<p> Possui histórico de câncer de pele na família? </p>				
							<p:selectOneRadio id="hist_cancer_pele" value="#{edicaoController.pacBuscado.hist_cancer_pele}" 
							required="true" requiredMessage="Histórico de câncer de pele não informado">
		      				<f:selectItem itemLabel="Sim" itemValue="S"/>
		      				<f:selectItem itemLabel="Não" itemValue="N"/>	      		
		      				</p:selectOneRadio>
		      				<p:message for="hist_cancer_pele" />
		      				
							<p> Possui histórico de outro câncer família? </p>				
							<p:selectOneRadio id="hist_cancer" value="#{edicaoController.pacBuscado.hist_cancer}" 
							required="true" requiredMessage="Histórico de câncer não informado">
		      				<f:selectItem itemLabel="Sim" itemValue="S"/>
		      				<f:selectItem itemLabel="Não" itemValue="N"/>	      		
		      				</p:selectOneRadio>
		      				<p:message for="hist_cancer" />
		      				
		      				<p> Já foi atendido pelo PAD anteriormente? Se sim, quantas vezes? </p>			
						    <p:spinner size="15" id="num_vezes_atendido" value="#{edicaoController.pacBuscado.num_vezes_atendido}" min="0"
						    required="true" requiredMessage="Número de vezes atendido não informado"
						    />
						    <p:message for="num_vezes_atendido" />
						    
						    
						    <p> Observações: </p>
						    <p:inputTextarea rows="3" cols="30" value="#{edicaoController.pacBuscado.obs}"/> 									
            				
        				</h:panelGrid>        				
    				</p:fieldset>
    				

		      		

		      		 
		      		<p:fieldset legend="Dados técnicos" toggleable="true">
        				<h:panelGrid columns="1" cellpadding="5">
							
							<p> Pressão arterial sistolica: </p>
							<p:inputNumber size="10" id="pres_art_sistolica" value="#{edicaoController.pacBuscado.pres_art_sistolica}"
							minValue="0.0" decimalPlaces="0"
							required="true" requiredMessage="O pressão arterial sistolica não foi informada">				
							</p:inputNumber>
							<p:message for="pres_art_sistolica" />
							
							<br/>
							
							<p> Pressão arterial diastolica: </p>
							<p:inputNumber size="10" id="pres_art_diastolica" value="#{edicaoController.pacBuscado.pres_art_diastolica}" 
							minValue="0.0" decimalPlaces="0"
							required="true" requiredMessage="O pressão arterial diastolica não foi informada">				
							</p:inputNumber>
							<p:message for="pres_art_diastolica" />
							
							<br/>
							
		      				<p> HAS: </p>				
							<p:selectOneRadio id="HAS" value="#{edicaoController.pacBuscado.HAS}" 
							required="true" requiredMessage="HAS não informado">
		      				<f:selectItem itemLabel="Sim" itemValue="S"/>
		      				<f:selectItem itemLabel="Não" itemValue="N"/>	      		
		      				</p:selectOneRadio>
		      				<p:message for="HAS" />							
							
		      				<p> Paciente possui diabetes? </p>				
							<p:selectOneRadio id="diabetes" value="#{edicaoController.pacBuscado.diabetes}" 
							required="true" requiredMessage="Presença de diabetes não informado">
		      				<f:selectItem itemLabel="Sim" itemValue="S"/>
		      				<f:selectItem itemLabel="Não" itemValue="N"/>	      		
		      				</p:selectOneRadio>
		      				<p:message for="diabetes" />
		      				
		      				<p> Uso de anticoagulante? </p>				
							<p:selectOneRadio id="anticoagulante" value="#{edicaoController.pacBuscado.anticoagulante}" 
							required="true" requiredMessage="Anticoagulante não informado">
		      				<f:selectItem itemLabel="Sim" itemValue="S"/>
		      				<f:selectItem itemLabel="Não" itemValue="N"/>	      		
		      				</p:selectOneRadio>
		      				<p:message for="anticoagulante" />
		      				
					      	<p> Paciente possui alergia algum medicamento? </p>
							<p:inputText size="30" id="alergia" value="#{edicaoController.pacBuscado.alergia}" 
							required="true"
							requiredMessage="Alergia não foi informado">				
							</p:inputText>
							<p:message for="alergia" />
							
							<br/>		      				
		      				
            				
            				
        					</h:panelGrid>
    				</p:fieldset>	      		 
					
					
					<!-- Completar lesao do zero pois não existe lesão cadastrada para o paciente -->
					<h:panelGroup rendered="#{edicaoController.lesaoVazia and usuarioController.usuarioAdmin}">
						<p:fieldset legend="Inserir Lesão" style="margin-bottom:20px; margin-top:20px;" toggleable="true">        				
        						<p> Este paciente não possui lesão cadastrada. Insira as lesões </p>
        						
        						
								<p> Região da lesão: </p>					
								<p:inputText size="30" id="regiao" value="#{edicaoController.lesao.regiao}">
								
									<p:ajax event="change" />
												
								</p:inputText>
										
								
								
								<p> Diametro maior (mm): </p>
								<p:spinner size="15" id="dia_maior" value="#{edicaoController.lesao.diametro_maior}" min="0" stepFactor="0.25">
								
									<p:ajax event="change" />
									
								</p:spinner>
								
								<p> Diametro menor (mm): </p>
								<p:spinner size="15" id="dia_menor" value="#{edicaoController.lesao.diametro_menor}" min="0" stepFactor="0.25">
								
									<p:ajax event="change" />
									
								</p:spinner>
								
								<p> Diagnóstico clínico: </p>							
								<p:autoComplete size="30" id="diag_clin" value="#{edicaoController.lesao.diagnostico_clinico}"
								completeMethod="#{pacienteController.completarDiagnosticoLesao}">
								
									<p:ajax event="change" />
									
								</p:autoComplete>
								
								<p> Diagnóstico Histopatológico: </p>							
								<p:autoComplete size="30" id="diag_hito" value="#{edicaoController.lesao.diagnostico_histo}"
								completeMethod="#{pacienteController.completarDiagnosticoLesao}">
								
									<p:ajax event="change" />
									
								</p:autoComplete>								
								
								
								<p> Procedimento: </p>
								<p:inputText size="30" id="procedimento" value="#{edicaoController.lesao.procedimento}">
								
									<p:ajax event="change" />
													
								</p:inputText>
								
								<p> Local do procedimento: </p>
								<p:inputText size="30" id="local_procedimento" value="#{edicaoController.lesao.local_atendimento}">
								
									<p:ajax event="change" />
													
								</p:inputText>
								
								<p> Data do procedimento: </p>
								<p:inputMask id="data_procedimento" value="#{edicaoController.lesao.data_atendimento}" mask="99/99/9999" >
		        					<f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-3"/>
		        					<p:ajax event="change" />
		        				</p:inputMask>
								
								
								<br/>
									
								<p> Observações: </p>
								<p:inputTextarea id="obs_les" rows="3" cols="30" value="#{edicaoController.lesao.obs}">
								
									<p:ajax event="change" />
									
								</p:inputTextarea>
								
								<br/>				
								
								<p> Inserir imagem(s) da lesão: </p>		
								<p:fileUpload label="Procurar Imagem" uploadLabel="Enviar" 
									cancelLabel="Cancelar" id="imgLesao" 
						 			fileUploadListener="#{edicaoController.inserirImagemLista}"
		        					multiple="true"	        					
		        					sizeLimit="10000000"
		        					update="growlLesao"
		        					style="width:570px"
		        				/>
								
								<br/> <br/>
								<p:growl id="growlLesao" showDetail="true" closable="true" />
								 
								
								<p:commandButton value="Inserir lesão" icon="ui-icon-plusthick">						
									<p:ajax event="click" update="tabelaLesoes growlLesao regiao dia_maior dia_menor diag_clin procedimento obs_les"								
									 listener="#{edicaoController.inserirLesao}" />								
								</p:commandButton>										
								
								<br/>
								<br/>
								
								<p:commandButton class="botao" id="verLesoes" value="Ver lesões adicionadas" type="button" icon="ui-icon-folder-open"/>
								
								<p:overlayPanel id="painelLesoes" for="verLesoes" hideEffect="fade" dynamic="true" style="width:800px; text-align: center;">
					       			<p:dataTable id="tabelaLesoes"				       			
									value="#{edicaoController.pacLesoes}" var="les">
										<p:column headerText="Região">
											<h:outputText value="#{les.regiao}" />
										</p:column>								
											
										<p:column headerText="Diametro maior">
											<h:outputText value="#{les.diametro_maior}" />
										</p:column>
										
										<p:column headerText="Diametro menor">
											<h:outputText value="#{les.diametro_menor}" />
										</p:column>
										
										<p:column headerText="Diagnóstico clínico">
											<h:outputText value="#{les.diagnostico_clinico}" />
										</p:column>	
										
										<p:column headerText="Diagnóstico Histopatológico">
											<h:outputText value="#{les.diagnostico_histo}" />
										</p:column>																	
										
										<p:column headerText="Procedimento">
											<h:outputText value="#{les.procedimento}" />
										</p:column>
										
										<p:column headerText="Local do procedimento">
											<h:outputText value="#{les.local_atendimento}" />
										</p:column>
										
										<p:column headerText="Data do procedimento">
											<h:outputText value="#{les.data_atendimento}" />
										</p:column>
													
													
										<p:column headerText="Imagem">										        	
										        	<p:commandButton update="@form:dialogImagem" 
										        	value="Imagem" icon="ui-icon-image" process="@this" oncomplete="PF('imagemDialog').loadContents()">
										        		<f:setPropertyActionListener value="#{les}" target="#{edicaoController.lesaoSelecionada}" />									        		
										        	</p:commandButton>    			            		            
										</p:column>														
										 
										<p:column headerText="Excluir">																		
											<p:commandButton action="#{edicaoController.excluirLesao}" icon="ui-icon-trash" 
											title="Excluir lesão" update="tabelaLesoes" process="@this"
											style="
												background: #ffb3b3 -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.5)),to(rgba(255,255,255,0)));
											">
		      									<f:setPropertyActionListener value="#{les}" target="#{edicaoController.lesaoSelecionada}" />          						
											</p:commandButton>								
											
										</p:column>														
										 				
									</p:dataTable>
	    						</p:overlayPanel>							
								
							
							
			           		<p:dialog header="Imagem da lesão" 
				           widgetVar="imagemDialog" modal="true"
				           showEffect="fade" hideEffect="fade" resizable="false"
				           style="width:600px; text-align:center;"
				           id="dialogImagem">				
								
								<p:commandButton value="Anterior" type="button" onclick="PF('switcher').previous();"
											icon="ui-icon-circle-triangle-w" id="prev"/>
								
								<p:commandButton value="Próxima" type="button" onclick="PF('switcher').next();"
											icon="ui-icon-circle-triangle-e" id="next"/>								
									
								<p:imageSwitch effect="fade" widgetVar="switcher" id="manuelSwitcher"
								    slideshowAuto="false">
								    
								<ui:repeat value="#{edicaoController.lesaoSelecionada.imagens}" var="img"
									id="manuelSwitcherImages">
								     
								        <p:graphicImage url="imgLesoes/#{img.path}" id="image"
													    class="imgDialog"/>
								        
								    </ui:repeat>
								    
								</p:imageSwitch>							
								
							
										
							</p:dialog>		
		        				
													
						</p:fieldset>
					
					</h:panelGroup>	
					
					
								
					<!-- Editar lesão já existente -->
					<h:panelGroup rendered="#{edicaoController.lesaoCompleta and usuarioController.usuarioAdmin}">
						<p:fieldset legend="Dados da lesão" style="margin-bottom:20px; margin-top:20px;" toggleable="true">        				
        	
        					<p:growl id="msgsEdicao" showDetail="true"/>					     
							    
							    <p:tabView value="#{edicaoController.pacLesoes}" var="les" id="lesoesTabView" style="margin-bottom: 25px;">						    	
							    	
							        <p:tab title="Lesao - #{les.regiao}">
							        
							        	<p:commandButton action="#{edicaoController.excluirLesao}" icon="ui-icon-trash"
							        	 value="Excluir lesão" update="@form:lesoesTabView" process="@this"
							        	 style="
							        	 background: #ffb3b3 -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.4)),to(rgba(255,255,255,0)));
							        	 float: right;
							        	 color: #333;
							        	 padding: 5px;
							        	 "							        	 
							        	 >
							      			<f:setPropertyActionListener value="#{les}" target="#{edicaoController.lesaoSelecionada}" />
							      			
							      			<p:confirm header="ATENÇÃO" message="Você tem certeza que deseja excluir esta lesão?"
					 						icon="ui-icon-alert" />
							      			          						
										</p:commandButton>	
										
										
										<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
			        						<p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
			        						<p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
			    						</p:confirmDialog>		
			    						
							        	
        								<h:outputText value="Dados clínicos da lesão" 
        								style="font-weight: bold; font-size: 20px; text-decoration: underline;"/>
        								
    										
							        
							            <h:panelGrid columns="2" cellpadding="5" style="margin-top: 20px; margin-bottom: 10px;">
							                <h:outputText value="Região da lesão:" style="font-weight: bold"/>					
											<p:inputText size="30" id="regiaoEdit" value="#{les.regiao}">								
												<p:ajax event="change" />												
											</p:inputText>
											
											<h:outputText value="Diametro maior (mm):" style="font-weight: bold"/>					
											<p:spinner size="15" id="dia_maiorEdit" value="#{les.diametro_maior}" min="0" stepFactor="0.25">								
												<p:ajax event="change" />									
											</p:spinner>								
								
								
											<h:outputText value="Diametro menor (mm):" style="font-weight: bold"/>								
											<p:spinner size="15" id="dia_menorEdit" value="#{les.diametro_menor}" min="0" stepFactor="0.25">								
												<p:ajax event="change" />									
											</p:spinner>
											
											<h:outputText value="Diagnóstico clínico:" style="font-weight: bold"/>
											<p:autoComplete size="30" id="diag_clinEdit" value="#{les.diagnostico_clinico}"
											completeMethod="#{pacienteController.completarDiagnosticoLesao}">								
												<p:ajax event="change" />									
											</p:autoComplete>							
								
											<h:outputText value="Procedimento:" style="font-weight: bold"/>								
											<p:inputText size="30" id="procedimentoEdit" value="#{les.procedimento}">								
												<p:ajax event="change" />													
											</p:inputText>
											
											<h:outputText value="Local do procedimento:" style="font-weight: bold"/>													 
											<p:inputText size="30" id="local_procedimento" value="#{les.local_atendimento}">
												 <p:ajax event="change" />																
											</p:inputText>
											
											<h:outputText value="Data do procedimento:" style="font-weight: bold"/>		      		
		        							<p:inputMask id="data_procedimento" value="#{les.data_atendimento}" mask="99/99/9999">
		        								<f:convertDateTime pattern="dd/MM/yyyy" timeZone="GMT-3"/>
		        								<p:ajax event="change" />	
		        							</p:inputMask>
		        							
		        							<h:outputText value="Cirurgiao responsável:" style="font-weight: bold"/>													 
											<p:inputText size="30" id="cirurgiao" value="#{les.cirurgiao}">
												 <p:ajax event="change" />																
											</p:inputText>
							
									
											<h:outputText value="Observações:" style="font-weight: bold"/>
											<p:inputTextarea id="obs_lesEdit" rows="3" cols="30" value="#{les.obs}">								
												<p:ajax event="change" />									
											</p:inputTextarea>
											
							            </h:panelGrid>
							            
							            <p:separator/>
							            <br/>
							            
							            <h:outputText value="Dados clínicos da lesão" 
        								style="font-weight: bold; font-size: 20px; text-decoration: underline;"/>        								
							            
							            <h:panelGrid columns="2" cellpadding="5" style="margin-top: 20px; margin-bottom: 10px;">
								            <h:outputText value="Diagnóstico Histopatológico:" style="font-weight: bold"/>							
											<p:autoComplete size="30" id="diag_hitoEdit" value="#{les.diagnostico_histo}"
												completeMethod="#{pacienteController.completarDiagnosticoLesao}">											
													<p:ajax event="change" update="@form"/>												
											</p:autoComplete>	
												
											<h:outputText value="Subtipo Histopatológico:" style="font-weight: bold"/>							
											<p:autoComplete size="30" id="subtipo" value="#{les.subtipo_histo}"
												completeMethod="#{pacienteController.completarSubtipoHisto}">											
													<p:ajax event="change" />												
											</p:autoComplete>	
										</h:panelGrid>
										
										<h:panelGrid columns="2" cellpadding="5" rendered="#{les.diagnostico_histo == 'MELANOMA C43.9'}" 
										style="margin-top: 20px; margin-bottom: 10px;">
										
												<h:outputText value="Clark:" style="font-weight: bold"/>
												<p:selectOneRadio id="clark" value="#{les.clark}">
			      									<f:selectItem itemLabel="I ou in situ" itemValue="I"/>
			      									<f:selectItem itemLabel="II" itemValue="II"/>
			      									<f:selectItem itemLabel="III" itemValue="III"/>
			      									<f:selectItem itemLabel="IV" itemValue="IV"/>
			      									<f:selectItem itemLabel="V" itemValue="V"/>
			      									<f:selectItem itemLabel="Não informado" itemValue="NÃO INFORMADO"/>	      		
			      								</p:selectOneRadio>
			      								
												<h:outputText value="Breslow (mm):" style="font-weight: bold"/>								
												<p:spinner size="15" id="breslow" value="#{les.breslow}" min="0" stepFactor="0.25">								
													<p:ajax event="change" />									
												</p:spinner>
												
												<h:outputText value="Índice Miotico (mm):" style="font-weight: bold"/>								
												<p:spinner size="15" id="indiceMiotico" value="#{les.indice_miotico}" min="0" stepFactor="0.25">								
													<p:ajax event="change" />									
												</p:spinner>
												
												<h:outputText value="Estadiamento:" style="font-weight: bold"/>					
												<p:inputText size="25" id="Estadiamento" value="#{les.estadiamento}">								
													<p:ajax event="change" />												
												</p:inputText>
										</h:panelGrid>
											
											
											
										
							            
							            <p:separator/>
							            <br/>
							            
							            <p:dataGrid value="#{les.imagens}" var="img" columns="4" layout="grid"
							            style="width:750px" id="dataGridImagens">		
							            
						            		<f:facet name="header">
						            			Edição das imagens
						            		</f:facet>					            

							            								            	
					            			<p:panelGrid columns="1" >																							     			
											
									     			<p:graphicImage url="imgLesoes/#{img.path}" id="imageEdit" 
										        		style= "
									        			height: 150px;
									        			width: 150px;
									        			margin-right: 10px;
									        		 "/>												        
									        										        		
													<p:commandButton action="#{edicaoController.excluirImgEdicao(les)}" icon="ui-icon-trash" 
													value="Excluir Imagem" update="@form:lesoesTabView @form:msgsEdicao" process="@this"
													style="
														background: #ffb3b3 -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.5)),to(rgba(255,255,255,0)));
													"
													>
						      							<f:setPropertyActionListener value="#{img}" target="#{edicaoController.imgSelecionada}" />          						
													</p:commandButton>
										    	
									    	</p:panelGrid>			    	
									    	
								    	</p:dataGrid>
								    	
								    	<br/>
								    		
								    	<p> Adicionar imagem para esta lesão: </p>		
										<p:fileUpload label="Procurar Imagem" uploadLabel="Enviar" 
											cancelLabel="Cancelar" id="imgLesaoEdit" 
								 			fileUploadListener="#{edicaoController.inserirImagemListaCompleta}"								 			 
				        					multiple="true"	        					
				        					sizeLimit="10000000"
				        					update="@form:msgsEdicao dataGridImagens"
				        					style="width:750px"
				        					
				        				>
				        				
				        					<f:attribute name="lesEdicaoImg" value="#{les}" />
				        				
				        				</p:fileUpload>
							        
							        </p:tab>
							        
							    </p:tabView>
							
							
							
								<p:commandButton value="Adicionar uma nova lesão" icon="ui-icon-plusthick"
							    		style="
							        	background: #d1d1e1 -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.4)),to(rgba(255,255,255,0))); 							        	 
							        	color: #333;
							        	padding: 3px;
							        	float: right;
							        	height: 35px;
							     		"
							     		action="#{edicaoController.adicionarNovaLesao}"
							     		update="@form:msgsEdicao @form:lesoesTabView"
							     	/>
							     	
							     <br/>
							     <br/>
															         				
													
						</p:fieldset>
					
					</h:panelGroup>				
					
					
      		
		      		<br></br>
		      		
		      		
		      		
		      		<p:growl id="growlCheck" showDetail="true" closable="true" />		      		 
		      		
		      		<p:commandButton  value="Finalizar Edição" class="botaoPac" action="#{edicaoController.editarPaciente}" type="submit"
		      		icon="ui-icon-pencil" update="growlCheck" ajax="false"
		      		style="
		      				background: #ccffcc -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.4)),to(rgba(255,255,255,0)));							        	 
							color: #333;
							height: 50px;
						"							
		      		 />		      		 
		      		
					<p:button  value="Cancelar" class="botaoPac" outcome="/dashboard/visualizar_paciente.xhtml"
		      		icon="ui-icon-cancel"
		      		style="
		      				background: #ffffb3 -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.6)),to(rgba(255,255,255,0)));							        	 
							color: #333;
							height: 50px;
							margin-left: 20px;
						"							
		      		 />		      		 
		      		
		      	
		      		<br></br>
		      		<br></br>	      		
		      		
		      	
	      	</h:form>     
      
      </ui:define>
      
</ui:composition>
