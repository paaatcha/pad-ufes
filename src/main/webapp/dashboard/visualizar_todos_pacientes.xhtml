<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      template="decoratorDashboard/decorator_dashboard.xhtml">
      
      <ui:define name="titulo"> Visualizar todos os pacientes cadastrados </ui:define>
      
      <ui:define name="conteudoInferiorPagina">

			<p>				
				Todos os pacientes cadastrados no banco estão listados na tabela abaixo. 
			<br/>				
			</p>		
    			 
				
				
				<p:growl id="growlCheck" showDetail="true" closable="true" />     		
				      		
				      		<h:outputText class="campoPac" value="Número de pacientes registrados no banco: " />
	      					<h:outputText class="valorPac" value="#{visualizacaoTodosController.numPac}"/>
				      		
				      		<br/><br/>
				      		
				      		<h:panelGroup id="tabelaTodos">
					      		<p:dataTable  var="pac" value="#{visualizacaoTodosController.todosPacs}"
					      		rows="10" paginator="true"
					      		paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
					            rowsPerPageTemplate="5,10,25,50,100"	
					            style="text-align:center;"			                        		            
					      		>		
	            									      		
	  								<f:facet name="header">
	            						Pacientes
	        						</f:facet>        						
	        						   
								    <p:column headerText="Nome completo">
								        <h:outputText value="#{pac.nome_completo}" />
								    </p:column>
								 
								    <p:column headerText="Cartão do SUS">
								        <h:outputText value="#{pac.cartao_sus}" />
								    </p:column>
								 
								    <p:column headerText="Idade">							    	
								        <h:outputText value="#{pac.idade}" />
								    </p:column>
								 
								    <p:column headerText="Atividade principal">
									        <h:outputText value="#{pac.atv_principal}" />
									 </p:column>
									 
								    <p:column headerText="Local de atendimento">
									        <h:outputText value="#{pac.local_atendimento}" />									        
									</p:column>								 
									 
									
							        <p:column headerText="Ver lesões">
							        	<h:form>
							        	
							        	<p:commandLink update="dialogLesoes" oncomplete="PF('lesaoDialog').show()" 
							        		style="
												float: none;												
												display: inline; 												
											"
							        	>
							        	
							        			<h:graphicImage url="#{facesContext.externalContext.requestContextPath}/../img/see.png" style="width: 25px; 
   												height: 25px;" />
							        	
							        	</p:commandLink>
							        							            
							           		<p:dialog header="Informações das lesões do paciente" 
									           widgetVar="lesaoDialog" modal="true" 
									           showEffect="fade" hideEffect="fade" resizable="false"
									           style="width:700px; text-align:center;"
									           id="dialogLesoes">
				           						           
							       					<p:dataTable id="tabelaLesoes"				       			
													value="#{pac.lesoes}" var="les"
													style="width:700px">
													
														<p:column headerText="Região">
															<h:outputText value="#{les.regiao}" />
														</p:column>								
															
														<p:column headerText="Diametro maior">
															<h:outputText value="#{les.diametro_maior}" />
														</p:column>
														
														<p:column headerText="Diametro menor">
															<h:outputText value="#{les.diametro_menor}" />
														</p:column>
														
														<p:column headerText="Diagnóstico clínico">
															<h:outputText value="#{les.diagnostico_clinico}" />
														</p:column>		
														
														<p:column headerText="Histopatológico">
															<h:outputText value="#{les.diagnostico_histo}" />
														</p:column>																				
														
														<p:column headerText="Procedimento">
															<h:outputText value="#{les.procedimento}" />
														</p:column>	
																						 				
													</p:dataTable>
													
  											</p:dialog>
							            </h:form>						            		            
							        </p:column>			
							        
							        <h:commandButton />
							        
							        <p:column headerText="Editar">
										<h:link outcome="editar_paciente.xhtml" styleClass="linkEditarPaciente"
											style="
												float: none;												
												display: inline; 												
											" >
												<h:graphicImage url="#{facesContext.externalContext.requestContextPath}/../img/edit.png" style="width: 25px; 
   												height: 25px;" />
	    										<f:param name="cartaosus" value="#{pac.cartao_sus}" />
										</h:link>									        
									</p:column>				        				        
							        						 
								</p:dataTable>				      		
				      		</h:panelGroup>		
							 				      		
	      
	    		<p:commandButton value="Imprimir página" type="button" icon="ui-icon-print" 
	    		style="display:block; 
	    		margin-top: 20px;
	    		height: 45px;
	    		"
	    		>
    				<p:printer target="tabelaTodos" />
				</p:commandButton>
           
      
	</ui:define>
	
</ui:composition>
