<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"      
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      template="decoratorDashboard/decorator_dashboard.xhtml">
      
      
      
      <ui:define name="conteudoInferiorPagina">   			 
				
				
				
				
				<h:form id="formPacGeralEdicao">	
						
						<p:growl id="growlCheck" showDetail="true" closable="true" />
				
	    				<p:fieldset legend="Editando paciente com cartão do SUS = #{edicaoGeralController.pacBuscado.cartao_sus}" style="margin-bottom:20px">    											
						
						
						<h:panelGrid columns="3" cellspacing="5" style="margin-bottom:10px">
							<p:commandButton action="#{edicaoGeralController.salvarAlteracoes}" icon="ui-icon-check"
							        	 value="Salvar alterações" update="@form"
							        	 style="
							        	 	background: #ccffcc -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.4)),to(rgba(255,255,255,0)));							        	 
										 	color: #333;
										 	padding: 5px;
							        	 "							        	 
							 />							      										      			
							
							<p:commandButton action="#{edicaoGeralController.excluirPacienteGeral}" icon="ui-icon-trash"
								        	 value="Excluir Paciente" update="@form growlCheck" process="@this"
								        	 style="
								        	 	background: #ffb3b3 -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.4)),to(rgba(255,255,255,0)));							        	 
								        	 	color: #333;
								        	 	padding: 5px;
								        	 "							        	 
								        	 >							      										      			
								      		
								      		<p:confirm header="ATENÇÃO" message="Você tem certeza que deseja excluir este paciente?"
						 					icon="ui-icon-alert" />
								      			          						
							</p:commandButton>
							
							<h:panelGroup>
							
								<h:outputText value="Auditado?" style="font-weight: bold; margin-right: 5px;"/>
           						<p:selectBooleanCheckbox  value="#{edicaoGeralController.pacBuscado.auditado}">		                	
            						<p:ajax event="change" />
            					</p:selectBooleanCheckbox>	
							
							</h:panelGroup>
							
						</h:panelGrid>
										
						<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
      						<p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
      						<p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
						</p:confirmDialog>	
						
									
								    					
	    				
				                
			              	<p:tabView value="#{edicaoGeralController.pacBuscado.lesoes}" var="les">
						        <p:tab title="Regiao: #{les.regiao}">
						        
						        
						        	<p:commandButton action="#{edicaoGeralController.excluirLesao}" icon="ui-icon-trash"
							        	 value="Excluir lesão" update="@form" process="@this"
							        	 style="
							        	 background: #ffb3b3 -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.4)),to(rgba(255,255,255,0)));
							        	 float: right;
							        	 color: #333;
							        	 padding: 5px;
							        	 "							        	 
							        	 >
							      			<f:setPropertyActionListener value="#{les}" target="#{edicaoGeralController.lesaoSelecionada}" />
							      			
							      			<p:confirm header="ATENÇÃO" message="Você tem certeza que deseja excluir esta lesão?"
					 						icon="ui-icon-alert" />
							      			          						
									</p:commandButton>	
						        
						        
						            <h:panelGrid columns="2" >						                
						                						                
						                <h:outputText value="Região:" style="font-weight: bold"/>
										<p:autoComplete size="30" id="regiao_edit" value="#{les.regiao}"
											completeMethod="#{pacienteController.completarRegiaoLesao}">								
												<p:ajax event="blur" />									
										</p:autoComplete>
						                
						                                
						                <h:outputText value="Diagnóstico:" style="font-weight: bold"/>
										<p:autoComplete size="30" id="diag_clinEdit" value="#{les.diagnostico}"
											completeMethod="#{pacienteController.completarDiagnosticoLesao}">								
												<p:ajax event="blur" />									
										</p:autoComplete>
						                						                
						                <h:outputText value="Idade:" style="font-weight: bold; font-size: 16px;"/>						                
						                <p:spinner size="15" value="#{les.idade}" min="0" stepFactor="1">								
											<p:ajax event="blur" />									
										</p:spinner>		                
						                
						                <h:outputText value="Coçou?" style="font-weight: bold; font-size: 16px;"/>
						                <p:selectOneRadio value="#{les.cocou}">
						                	<f:selectItem itemLabel="Sim" itemValue="S"/>
		      								<f:selectItem itemLabel="Não" itemValue="N"/>
						                </p:selectOneRadio>
						                
						                <h:outputText value="Cresceu?" style="font-weight: bold; font-size: 16px;"/>
						                <p:selectOneRadio value="#{les.cresceu}">
						                	<f:selectItem itemLabel="Sim" itemValue="S"/>
		      								<f:selectItem itemLabel="Não" itemValue="N"/>
						                </p:selectOneRadio>						                				                
						                						                
						                <h:outputText value="Doeu?" style="font-weight: bold; font-size: 16px;"/>
						                <p:selectOneRadio value="#{les.doeu}">
						                	<f:selectItem itemLabel="Sim" itemValue="S"/>
		      								<f:selectItem itemLabel="Não" itemValue="N"/>
						                </p:selectOneRadio>
						                						                					                
						                <h:outputText value="Mudou?" style="font-weight: bold; font-size: 16px;"/>
						                <p:selectOneRadio value="#{les.mudou}">
						                	<f:selectItem itemLabel="Sim" itemValue="S"/>
		      								<f:selectItem itemLabel="Não" itemValue="N"/>
						                </p:selectOneRadio>
						                					                
						                <h:outputText value="Sangrou?" style="font-weight: bold; font-size: 16px;"/>
						                <p:selectOneRadio value="#{les.sangrou}">
						                	<f:selectItem itemLabel="Sim" itemValue="S"/>
		      								<f:selectItem itemLabel="Não" itemValue="N"/>
						                </p:selectOneRadio>
						                					                
						                <h:outputText value="Relevo?" style="font-weight: bold; font-size: 16px;"/>
						                <p:selectOneRadio value="#{les.relevo}">
						                	<f:selectItem itemLabel="Sim" itemValue="S"/>
		      								<f:selectItem itemLabel="Não" itemValue="N"/>
						                </p:selectOneRadio>
						                
						                <h:outputText value="Observação:" style="font-weight: bold; font-size: 16px;"/>
										<p:inputTextarea rows="3" cols="30" value="#{les.obs}"/>
							
						                
						                					                					 
						            </h:panelGrid>
						            
						            
						            <br/>
						            
						            							        
							        <p:commandButton action="#{edicaoGeralController.atualizarImagens}" icon="ui-icon-refresh" 
											value="Refresh imagens" update="dataGridImagensGeralEdicao @form:growlCheck" process="@this"
											style="
												background: #fff587 -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.5)),to(rgba(255,255,255,0)));
												float: right;
							        	 		color: #333;
							        	 		padding: 5px;
											"
									/>
									
						         							         	
								    <br/>
								    <br/>
								    <br/>
								    
									    
							            <p:dataGrid value="#{les.imagens}" var="img" layout="grid" 
							            style="width:auto" id="dataGridImagensGeralEdicao">		
							            
						            		<f:facet name="header">
						            			Imagens da lesão
						            		</f:facet>
						            							
						            				            								            						            	
					            			<p:panelGrid columns="1" >	
					            			
					            				
									     			<p:graphicImage url="imgLesoesGeral/#{img.path}" id="imageEdit" 
										        		style= "
									        			height: 500px;
									        			width: 500px;
									        			margin-right: 10px;
									        		 "/>									        		 
									        		 											        
									        		
										        	<h:panelGroup>						        		
														<p:commandButton action="#{edicaoGeralController.excluirImgEdicao(les)}" icon="ui-icon-trash" 
														value="Excluir Imagem" update="dataGridImagensGeralEdicao @form:growlCheck" process="@this"
														style="
															background: #ffb3b3 -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.5)),to(rgba(255,255,255,0)));
															margin-left: 105px;
														"
														>
							      							<f:setPropertyActionListener value="#{img}" target="#{edicaoGeralController.imgSelecionada}" />          						
														</p:commandButton>
														
														
														<p:button value="Editar imagem" outcome="utils/editor_imagem.xhtml" 
															icon="ui-icon-pencil" target="_blank"
															style="												
																background: #99c2ff -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.5)),to(rgba(255,255,255,0)));
																margin-left: 10px;
															" >
											    				<f:param name="imgpath" value="#{img.path}" />
											    													    				
														</p:button>
														
														
													</h:panelGroup>
										    	
									    	</p:panelGrid>
									    				    	
									    	
								    	</p:dataGrid>	
								    	
								    	
										<br/><br/>	
										<h:outputText value="Adicionar uma nova imagem para esta lesão:" style="font-weight: bold; font-size: 22px; color: #006600;"/>											
										
										<p:fileUpload label="Procurar Imagem" uploadLabel="Enviar" 
											cancelLabel="Cancelar" id="imgLesaoEdit" 
								 			fileUploadListener="#{edicaoGeralController.inserirNovaImagem}"								 			 
				        					multiple="false"	        					
				        					sizeLimit="10000000"
				        					update="@form:growlCheck dataGridImagensGeralEdicao"
				        					style="width:750px"
				        					 
				        				>
				        				
				        					<f:attribute name="lesaoParaNovaImg" value="#{les}" />
				        				
				        				</p:fileUpload>
								    	
								    						    
	
									    
									    
									    
									    
									    
									    
									    
									    
									    
						            
						        </p:tab>
						    </p:tabView>
	     		   		
	     		   		</p:fieldset>	    			
    			
    		</h:form>
				  
	</ui:define>
	
</ui:composition>
